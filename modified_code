## create the conda env if you have not already did
conda create -y --name ngs1 python=3.6
conda activate ngs1

mkdir ~/workdir/project_ngs1/sample_data && cd ~/workdir/project_ngs1/sample_data

#Download Sample Data 
wget https://sra-download.ncbi.nlm.nih.gov/traces/sra49/SRZ/010956/SRR10956573/MC_MYR2_R1.fastq.gz
wget https://sra-download.ncbi.nlm.nih.gov/traces/sra49/SRZ/010956/SRR10956573/MC_MYR2_R2.fastq.gz
gunzip MC_MYR2_R1.fastq.gz
gunzip MC_MYR2_R2.fastq.gz

Transcriptome
#wget ftp://ftp.ensembl.org/pub/release-99/fasta/danio_rerio/dna/Danio_rerio.GRCz11.dna.toplevel.fa.gz
wget ftp://ftp.ensembl.org/pub/release-99/fasta/danio_rerio/dna/Danio_rerio.GRCz11.dna.chromosome.10.fa.gz
gunzip Danio_rerio.GRCz11.dna.chromosome.10.fa.gz

#Annotation file 
wget ftp://ftp.ensembl.org/pub/release-99/gtf/danio_rerio/Danio_rerio.GRCz11.99.chr.gtf.gz
gunzip Danio_rerio.GRCz11.99.chr.gtf.gz

#Download seqtk
sudo apt install seqtk

# subsetting to 5M 
seqtk sample -s100 MC_MYR2_R1.fastq 5000000 > MC_MYR2_R1_5M.fastq
seqtk sample -s100 MC_MYR2_R2.fastq 5000000 > MC_MYR2_R2_5M.fastq

#Hisat
Install hisat conda install -c bioconda -y hisat2

mkdir ~/project_ngs1/hisat_align/hisat_index && cd ~/project_ngs1/hisat_align/hisat_index

# Indexing 
hisat2_extract_splice_sites.py ~/project_ngs1/sample_data/Danio_rerio.GRCz11.99.chr.gtf > splicesites.tsv 
hisat2_extract_exons.py ~/project_ngs1/sample_data/Danio_rerio.GRCz11.99.chr.gtf > exons.tsv 
hisat2-build -p 1 --ss splicesites.tsv --exon exons.tsv Danio_rerio.GRCz11.dna.chromosome.10.fa Danio_rerio.GRCz11

#Align
cd ~/workdir/project_ngs1/Hisat_align
R1="$HOME/workdir/project_ngs1/sample_data/MC_MYR2_R1_5M.fastq"
R2="$HOME/workdir/project_ngs1/sample_data/MC_MYR2_R2_5M.fastq"

